<div class="container mt-5">
    <div class="row">
      <!-- Filters Section -->
      <div class="col-12  mb-3">
        <div class="card shadow-sm">
          <div class="card-body">
            <div class="row">
                <div class="form-group col-6">
                    <label class="pb-1">Customer Name</label>
                    <p-dropdown
                      styleClass="w-100"
                      [options]="allCustomersWithTransactions"
                      [(ngModel)]="customerSelected"
                      optionLabel="name"
                      appendTo="body"
                      panelStyleClass="tlm-select-ddl"
                      placeholder="Select customer"
                    ></p-dropdown>
                  </div>
                  <div class="form-group col-6">
                    <label class="w-100 text-nowrap text-truncate">Total Transaction Amount Above</label>
                    <div class="input-wrapper">
                    <p-inputNumber
                      [(ngModel)]="transactionSelected"
                      mode="decimal"
                      placeholder="Enter transaction amount"
                      inputId="withoutgrouping"
                    ></p-inputNumber>
                </div>
                  </div>
            </div>
            
            <div class="d-grid gap-2">
                <div class="row">
                    <p-button class="col-md-2 col-sm-1 mt-1"
                    (click)="applyFilter(customerSelected, transactionSelected)"
                    label="Filter"
                    severity="success" 
                    label="Filter" 
                    icon="pi pi-check" 
                  ></p-button>
                  <p-button class="col-md-2 col-sm-1 mt-1"
                    (click)="clearFilter()"
                    label="Clear Filter"
                    styleClass="btn-secondary"
                  ></p-button>
                </div>
             
            </div>
          </div>
        </div>
      </div>
  
      <!-- Customer Transactions Table -->
      <div class="col-md-12">
        <div class="card shadow-sm">
          <div class="card-header bg-success text-white">
            <h2>Customers Transactions</h2>
          </div>
          <div class="card-body">
            <p-table [value]="customersWithTransactions" class="table table-striped table-hover">
              <ng-template pTemplate="header">
                <tr>
                  <th>ID</th>
                  <th>Name</th>
                  <th>Transactions</th>
                  <th>Total Transactions</th>
                </tr>
              </ng-template>
              <ng-template pTemplate="body" let-customer>
                <tr>
                  <td>{{ customer.id }}</td>
                  <td>{{ customer.name }}</td>
                  <td>
                    <ul class="list-unstyled ">
                      <li *ngFor="let transaction of customer.transactions" class="mb-2 justify-content-start">
                        <span>{{ transaction.date }}</span>
                        <span class="badge bg-success ms-2">${{ transaction.amount }}</span>
                      </li>
                    </ul>
                  </td>
                  <td>${{ customer.totalTransactions }}</td>
                </tr>
              </ng-template>
              <ng-template *ngIf="customersWithTransactions.length < 1">
                <tr>
                  <td colspan="99" class="table-nodata">
                    <span class="svg-icon"></span>
                    <p>No Data Found</p>
                  </td>
                </tr>
              </ng-template>
            </p-table>
          </div>
        </div>
      </div>
  
      <!-- Chart Section -->
      <div class="col-md-12 mt-3" *ngIf="customerSelected">
        <div class="card shadow-sm">
          <div class="card-header bg-success text-white text-center">
            <h2>Transaction Amount per Day</h2>
          </div>
          <div class="card-body">
            <p-chart type="bar" [data]="basicData" [options]="basicOptions" styleClass="chart-height"></p-chart>
          </div>
        </div>
      </div>
    </div>
  </div>
  